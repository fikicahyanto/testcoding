<!-- <!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">
  <h2>Dashboard</h2>
  <p>Selamat datang di aplikasi.</p>
  <a href="/peta/" class="btn btn-info">Lihat Peta</a>
  <a href="/api/" class="btn btn-success">Lihat API</a>
  <a href="/logout/" class="btn btn-warning">Logout</a>
</body>
</html> -->


<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<style>
    body {
      background-color: #e6ecf0;
      font-family: Arial, sans-serif;
    }

    .twitter-header {
      background: linear-gradient(to bottom, #99ccff 0%, #66b3ff 100%);
      padding: 20px;
      color: white;
    }

    .tweet-box {
      background: white;
      padding: 15px;
      border-bottom: 1px solid #ccc;
    }

    .tweet-box textarea {
      width: 100%;
      resize: none;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
    }

    .tweet-feed {
      background: white;
      border-top: 1px solid #ccc;
    }

    .tweet {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }

    .tweet strong {
      color: #1da1f2;
    }

    .nav-tabs .nav-link {
      color: #1da1f2;
    }

    .tweet-time {
      font-size: 0.85em;
      color: #999;
    }

    .tweet a {
      color: #1da1f2;
      text-decoration: none;
    }

    .tweet a:hover {
      text-decoration: underline;
    }
  </style>
<body>
  
{% block content %}

<!-- Form Post -->
<div class="twitter-header d-flex justify-content-between mb-3"><h2 class="mb-0">Dashboard</h2> <a href="/logout/" class="btn btn-warning">Logout</a></div>
  <form method="post">
    {% csrf_token %}
    <label class="form-label text-start">{{ form.as_p }} </label>
      <div class="text-end">
      <button type="submit" class="btn btn-primary btn-sm">Tweet</button>
    </div>
  </form>
  <hr>

<!-- Daftar Post -->
{% for post in posts %}
  <div class="card my-2">
    <div class="card-body">
      <small class="text-muted">{{ post.created_at|date:"Y-m-d H:i" }}</small>
      <p class="card-text"> <span style="color: blue;">{{ post.user.username }} </span> {{ post.message }} <a href="{% url 'peta:peta' post.id %}">(Lihat Lokasi)</a></p>
    </div>
  </div>
{% empty %}
  <p>Tidak ada postingan.</p>
{% endfor %}

<!-- Pagination -->
<div class="pagination">
  {% if posts.has_previous %}
    <a href="?page={{ posts.previous_page_number }}"> <button class="btn btn-primary btn-sm"> Sebelumnya </button> </a>
  {% endif %}

  <span>  Halaman {{ posts.number }} dari {{ posts.paginator.num_pages }} </span>

  {% if posts.has_next %}
    <a href="?page={{ posts.next_page_number }}"><button class="btn btn-primary btn-sm"> Berikutnya </button> </a>
  {% endif %}
</div>
{% endblock %}
</body>
</html>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        function (position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          document.getElementById("id_latitude").value = lat;
          document.getElementById("id_longitude").value = lon;
        },
        function (error) {
          alert("Gagal mendapatkan lokasi. Aktifkan izin lokasi di browser.");
        }
      );
    } else {
      alert("Browser tidak mendukung deteksi lokasi.");
    }
  });
</script>

